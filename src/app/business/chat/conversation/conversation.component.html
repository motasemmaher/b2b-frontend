<section style="overflow-y: scroll; height: 100%">
  <ion-card class="h-100">
    <ion-grid float-left fixed>
      <ion-row style="align-items: center">
        <ion-col style="flex-grow: unset" (click)="goBack()">
          <ion-icon
            style="width: 26px; height: 26px"
            name="arrow-back"
          ></ion-icon>
        </ion-col>
        <ion-col style="max-width: 60px; max-height: 60px">
          <ngx-avatar
          name="{{ conversationInfo.name }}"
        ></ngx-avatar>
        </ion-col>
        <ion-col>
          <ion-label style="font-weight: bold">
            {{ conversationInfo.name }}
          </ion-label>
        </ion-col>
      </ion-row>
      <ion-content #content>
        <div *ngFor="let msg of messages; let i = index; let l = last">
          <ion-row>
            {{ l ? scrollBottom() : "" }}
            <ion-col
              offset="6"
              size="6"
              *ngIf="msg.sender === userInfo._id"
              class="message sent-message"
            >
              <span>{{ msg.text }}</span>
              <div class="msg-time"><br />{{ msg.date }}</div>
            </ion-col>
  
            <ion-col
              size="6"
              *ngIf="msg.receiver !== userInfo._id"
              class="message received-message"
            >
              <span>{{ msg.text }}</span>
              <div class="msg-time"><br />{{ msg.date }}</div>
            </ion-col>
          </ion-row>
        </div>
      </ion-content>
    </ion-grid>
    <div
      style="
        width: 48.4%;
        position: fixed;
        bottom: 1px;
        min-width: 384px;
        max-width: 500px;
      "
    >
      <ion-grid>
        <ion-row align-items-center no-padding>
          <ion-col size="10">
            <textarea
              autosize
              maxRows="3"
              class="message-input"
              [(ngModel)]="message"
            ></textarea>
          </ion-col>
          <ion-col size="2">
            <ion-button
              style="--padding-start: 0.5em; --padding-end: 0.5em"
              expand="block"
              fill="clear"
              color="primary"
              disable="msgtxt === ''"
              (click)="sendMessage()"
            >
              <ion-icon name="send" slot="icon-only"></ion-icon>
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
  </ion-card>
</section>
